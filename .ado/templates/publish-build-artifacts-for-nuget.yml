steps:
  - task: PowerShell@2
    displayName: Copy NuGet header files
    inputs:
      filePath: 'vnext\Scripts\Tfs\Layout-Headers.ps1'
      arguments: -TargetRoot $(Build.ArtifactStagingDirectory)
    condition: and(succeeded(), eq(variables['BuildConfiguration'], 'Debug'), eq(variables['BuildPlatform'], 'x86'))

  - task: CopyFiles@2
    displayName: Copy NuGet artifacts
    inputs:
      SourceFolder: vnext\target\$(BuildPlatform)\$(BuildConfiguration)
      TargetFolder: $(Build.ArtifactStagingDirectory)\$(BuildPlatform)\$(BuildConfiguration)
      Contents: |
        '**\React.Windows.Desktop.DLL\**'
        '**\React.Windows.Desktop.Test.DLL\**'
        '**\ReactUWP\**'

  - task: PublishBuildArtifacts@1
    displayName: "Publish Artifact: ReactWindows"
    inputs:
      PathtoPublish: $(Build.ArtifactStagingDirectory)
      ArtifactName: "ReactWindows"
