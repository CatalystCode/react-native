version: 1.0.{build}
max_jobs: 2
image: Visual Studio 2015
cache: 
- ReactWindows\packages -> **\packages.config
- '%USERPROFILE%\.nuget\packages -> **\project.json'  

install:
- cmd: git submodule -q update --init

before_build:
- nuget restore ReactWindows\ReactNative.sln

build_script:
- cmd: >-

    set DEVENV="%VS140COMNTOOLS%\..\IDE\devenv"

    %DEVENV% /build "Debug|x64" ReactWindows\ReactNative.sln

    %DEVENV% /build "ReleaseBundle|x64" ReactWindows\ReactNative.sln

    %DEVENV% /build "Debug|ARM" ReactWindows\ReactNative.sln

test:
  assemblies:
  - ReactWindows\ReactNative.Net46.Tests\bin\x64\**\*.Tests.dll
